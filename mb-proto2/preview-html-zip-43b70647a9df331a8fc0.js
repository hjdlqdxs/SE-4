try{let ae=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},me=new ae.Error().stack;me&&(ae._sentryDebugIds=ae._sentryDebugIds||{},ae._sentryDebugIds[me]="42feec3b-5da8-4cb7-89ed-3ff6ce60f3a9",ae._sentryDebugIdIdentifier="sentry-dbid-42feec3b-5da8-4cb7-89ed-3ff6ce60f3a9")}catch(ae){}{let ae=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};ae.SENTRY_RELEASE={id:"22.3.10"}}(()=>{"use strict";var ae={9820:n=>{n.exports=html2canvas},16700:n=>{n.exports=canvg},18183:(n,w,e)=>{e.d(w,{Dw:()=>f,H:()=>l,QQ:()=>F,X9:()=>k,o$:()=>p});const p="/proto",f=S=>p+"/"+S,_=S=>{const h=/^\/proto\/design\/(?:([^/]+?))$/i.exec(S);return h?h[1]:new Error("project cid error")},l=S=>{let{search:h,pathname:s}=S;if(s.includes("/sharing"))return s.includes("dashboard")||s.includes("htmlzip")?s.split("/").at(-3):s.includes("embed/v2")?location.pathname.split("/").at(-4):s.split("/").at(-2);{const y=new URLSearchParams(h).get("token");if(y)return y;const d=/^\/proto\/([^/]+?)(?:\/forum|\/uichina|\/embed|\/embed\/v2|\/htmlzip|\/sharing|\/ro)?\/?$/i.exec(s);return d?d[1]:""}},O=S=>{let{pathname:h}=S;const s=/^\/proto\/design\/([^/]+)\/?$/i.exec(h);return s?s[1]:""},k=S=>{let{search:h,pathname:s}=S;return l({search:h,pathname:s})||O({pathname:s})},F="/p2mkt_view",E=S=>F+"/"+S,o=S=>/^\/p2mkt_view\/(?:([^/]+?))$/i.exec(S)[1]},28501:(n,w,e)=>{var p=e(70768),f=e(68818),_=e(55769),l=e(39096);const O={"sk-bouncedelay":"ZdD58bXGNcNoQjiPeXLu"},k={"sk-bouncedelay":"ZBrU7Yes6CevGkk6hArA"};var F=e(70526);e(17730),e(43435);var E=e(95549),o=e(38502),S=e(23323),h=e(18381),s=e(64406),y=e(9338),d=e(29767),L=e(24437),N=e(28731),I=e(72214);class Y extends o.PureComponent{constructor(i){super(i),(0,E.A)(this,"handleGetViewMode",()=>{var A;const{store:Z,isHtmlZip:X}=this.props,re=new URLSearchParams(location.search).get("view_mode");return X?Z==null||(A=Z.getState())==null||(A=A.editor)==null||(A=A.state)==null||(A=A.mode)==null?void 0:A.previewViewMode:re});const{store:g,projectBasic:P,projectMeta:b,isHtmlZip:T}=i,x=new URLSearchParams(location.search);let V="",r="";const u=x.get("view_mode");if(["read_only","inspect"].includes(u)){var U;V=x.get("screen")||(g==null||(U=g.getState())==null||(U=U.current.currentScreen)==null?void 0:U.cid)||"",r=x.get("canvasId")||""}this.state={visibleIsEmpty:!1};try{const A=(0,L.rV)(V);g.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:P,projectMeta:b,screenCid:A,canvasCid:r,isHtmlZip:T}})}catch(A){this.state={visibleIsEmpty:!0}}}componentDidMount(){this.props.onComponentDidMount(),window.addEventListener("message",N.a,!1),this.handleGetViewMode()==="inspect"&&MB.__store__.dispatch({type:"entry:handle-tool:toggle:inspect-mode",payload:{mode:!0}})}componentWillUnmount(){window.removeEventListener("message",N.a,!1)}render(){const{store:i}=this.props;return this.state.visibleIsEmpty?(0,d.V)():(0,I.jsx)(h.Kq,{store:i,children:(0,I.jsx)(y.A,{children:(0,I.jsx)(s.A,{})})})}}var t=e(79388);const a=async j=>{let{projectMetaCid:i}=j;await(0,t.F2)({userId:void 0,flpakKey:i,onTransferError:t.z0,onReadOnlyError:t.sH,isDummyCmt:!0,__fetchFlpakAsync:f.BD},void 0)};var M=e(22215);const W=function(j,i,g){const P=i.getGuidesData()||"[]",b=new Set(JSON.parse(P)),T=new Set,x=new Map,V={checkGuideHasShown:r=>ENV.IS_ON_PREMISES||b.has(r),checkGuideToBeShown:r=>T.has(r),getState:()=>({commonGuidesHasShown:Array.from(b),commonGuidesToBeShown:Array.from(T),mountGuidesMap:x}),tryToShowGuide:r=>{var u;if(b.has(r)||!((u=MB)!=null&&(u=u.user)!=null&&u.id)||ENV.IS_ON_PREMISES)return;const U=document.getElementById("MD_"+r);if(U){U.style.display="block";return}T.add(r),(0,M.o)(r,j,g)},markGuideAsRead:r=>{b.add(r),i.setGuidesData(JSON.stringify(Array.from(b)))},batchMarkGuideAsRead:r=>{r.forEach(u=>b.add(u)),i.setGuidesData(JSON.stringify(Array.from(b)))},closeAndMarkGuideAsRead:r=>{V.checkGuideHasShown(r)||(V.closeGuide(r),V.markGuideAsRead(r))},closeGuide:r=>{const u=document.getElementById("MD_"+r);u&&u.parentNode&&u.parentNode.removeChild(u)},closeAllGuide:()=>{const r=document.getElementById("GUIDES");r&&r.parentNode&&r.parentNode.removeChild(r)},hideAllGuides:()=>{const r=document.getElementById("GUIDES");r&&Array.from(r.children).forEach(u=>u.style.visibility="hidden")},restoreAllGuides:()=>{const r=document.getElementById("GUIDES");r&&Array.from(r.children).forEach(u=>u.style.visibility="visible")},removeGuide:r=>{b.delete(r),i.setGuidesData(JSON.stringify(Array.from(b)))},tryToContinueMountGuide:(r,u)=>{const U=x.get(r);U&&typeof(U==null?void 0:U.handleContinue)=="function"&&U.handleContinue(u)},tryToResizeMountGuide:r=>{const u=x.get(r);u&&typeof(u==null?void 0:u.handleResize)=="function"&&u.handleResize()},tryToCloseMountGuide:r=>{const u=x.get(r);u&&typeof(u==null?void 0:u.handleClose)=="function"&&u.handleClose()},registerMountGuideCallback:(r,u)=>{const U=x.get(r)||{};x.set(r,{...U,...u})},removeMountGuideCallback:(r,u)=>{if(!u){x.delete(r);return}const U=x.get(r)||{};x.set(r,{...U,[u]:void 0})}};return V},ie=j=>{let{store:i,commonGuidesData:g,isDesign:P,isPreview:b}=j;MB.commonGuideHelper=W(i,{getGuidesData:()=>g,setGuidesData:updateUserCommonGuidesData},{isDesign:P,isPreview:b})},Me=j=>{let{store:i,isDesign:g,isPreview:P}=j;const b={guide:{dashboard_guides:"",workspace_guides:"",square_guides:null,workspace_guides_version:"",default_team_cid:"",root_project_team_cid:"",workspace_guides_2203:"",workspace_guides_2203_version:"",aboard_guides:""},guide_project_template_cid:"",guide_project_template_2203_cid:"",guide_flow_template_cid:"",guide_design_template_cid:"",guide_prototype_template_cid:""},{guide:{workspace_guides:T}}=b;MB.commonGuideHelper=W(i,{getGuidesData:()=>T,setGuidesData:()=>{}},{isDesign:g,isPreview:P})};var H=e(46407),z=e(10629),oe=e(44327),ve=e(55244),Te=e(15399),ye=e(47163),Ee=e(98033);const Se=j=>{let{initialData:i,designOptions:g,global:P,onUpdateSharing:b}=j;const{user:T,org:x,team:V,preference:r,orgList:u,user_fcg:U,org_fcg:A,space:Z,canEditByCurrentUser:X}=i,{currentUser:te,currentOrg:re}=(0,Ee.n)({user:T,org:x});(0,ve.kZ)((0,ye.w)()),Object.assign(MB,{user:te||{},orgList:u,currentOrg:re,canEditByCurrentUser:X,global:{...P,popupHelper:(0,z.L)(),experienceLoginModalHelper:H.F}}),MB.action("current:update:state",{currentOrg:re,currentTeam:V,currentUser:te,orgList:u,user_fcg:U,org_fcg:A,currentSpace:Z,personalOrg:x}),MB.action("update:design:options",{designOptions:g}),T!=null&&T.id&&MB.action("entry:init:preference",{preference:r}),b&&b()},We=async j=>{let{designStore:i}=j,g="[]";try{const{guide:P}=await requestUserCommonGuidesData();g=P==null?void 0:P.workspace_guides}catch(P){console.error("\u83B7\u53D6 guide_data \u5931\u8D25")}await initCommonGuide({store:i,commonGuidesData:g,isDesign:!0,isPreview:!1})},Pe=async j=>{let{type:i,projectBasicCid:g}=j;switch(i){case DesignType.Design:return requestProjectFullDataFlat(g);case DesignType.Experience:return requestExperienceFullDataFlat(g);default:throw new Error(i+" not found in known design types for "+g)}};var Be=e(95434),be=e(97109),Ce=e(62556),Oe=e(16810),le=e(56202);const De=j=>{const{isEmbedV1:i=!1}=j||{};return{isDesktop:!((0,le.Fr)()||i),isInApp:!1,isMultiLink:!1,isMobile:(0,le.Fr)(),isIOSClient:(0,le.Hv)(),isStandAlone:(0,le.Gd)(),isEmbedV1:i,isEmbedV2:!1,isHTMLZip:!1,isUIChina:(0,le.II)(),isForum:(0,le.uf)(),isElectron:(0,le.b8)(),isSquare:!1,isFeishu:(0,le.Fl)(),isWechat:(0,le.vq)(),...j}},Ae=j=>{const{isMobile:i,isEmbedV2:g,isSquare:P}=j;return i?Ce.A:g||P?be.A:Oe.A};var _e=e(88334),ke=e(68587);const Ie=j=>{let{designOptions:i,previewOptions:g,initialData:P,WMListConfig:b,onComponentDidMount:T,sharing:x}=j,V=!1;(0,ke.FR)();const r=(0,S.s)(MB);Se({initialData:P,designOptions:i,global:{designOptions:i,previewOptions:g}}),(0,_e.LN)(b);const{isIOSClient:u,isStandAlone:U}=g;(U||u)&&(document.documentElement.style.height="100vh");const{runnerController:A,messageBucket:Z,webpackInterface:X,PreviewApp:te}=(0,Be._)(Ae(g));return Object.assign(MB,{runnerController:A,messageBucket:Z,webpackInterface:X,global:{...MB.global||{},popupHelper:(0,z.L)(),designOptions:i,previewOptions:g}}),MB.webpackInterface.store.dispatch({type:"preview:update:state",payload:{previewOptions:g}}),{requestData:async re=>{const{user:pe,org:ge,preference:we,project_basic:Re,project_meta:Fe}=P;return Me({store:r,isDesign:!0,isPreview:!1}),Object.assign(MB,{tag:Re==null?void 0:Re.version}),MB.action("update:design:options",{designOptions:MB.global.designOptions}),await a({projectMetaCid:Fe.cid}),MB.webpackInterface.store.dispatch({type:"preview:set:current-projectShare",payload:{projectShare:x}}),MB.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:we||{}}}),MB.action("entry:handle-tool:preview:view_mode",{previewViewMode:re}),Object.assign(MB,{user:pe||{},canEditByCurrentUser:!1,org:ge||void 0}),MB.webpackInterface.store.dispatch({type:"entry:state:init"}),V=!0,(0,ke.RZ)(),{projectAlike:Re,projectMeta:Fe,projectShare:x}},renderDesign:re=>{let{projectAlike:pe,projectMeta:ge}=re;return V?(0,I.jsx)(Y,{store:r,projectBasic:pe,projectMeta:ge,onComponentDidMount:T,isHtmlZip:!0}):null},renderPreview:re=>{let{projectAlike:pe,projectMeta:ge,projectShare:we}=re;return V?((0,d.X)(we),(0,I.jsx)(te,{store:X.store,previewMode:"preview",projectAlike:pe,projectMeta:ge,projectShare:we})):null}}};var Le=e(67787);const B=Le.Ay.div.withConfig({displayName:"styles__StyledExampleApp",componentId:"sc-1r36j4k-0"})(["&{position:absolute;top:0;left:0;bottom:0;right:0;transition:all 0.2s ease-in-out;}.mb-design-page{height:100%;&,#mb-toolbar{transition:all 0.2s ease-in-out;}&.is-collapse{opacity:0;z-index:0;#mb-toolbar{transform:translateY(-100%);}.mb-right-panel{transform:translateX(100%);}}}.mb-preview-page{position:absolute;top:0;left:0;width:100%;bottom:0;font-size:12px;transition:all 0.2s ease-in-out;&.is-collapse{opacity:0;z-index:0;}}"]),c=Le.Ay.div.withConfig({displayName:"styles__StyledROExampleApp",componentId:"sc-1r36j4k-1"})(["&{position:absolute;top:0;left:0;bottom:0;right:0;transition:all 0.2s ease-in-out;}.mb-design-page{height:100%;position:relative;z-index:1;&.is-collapse{opacity:0;z-index:0;}}.mb-preview-page{position:absolute;top:0;left:0;width:100%;bottom:0;font-size:12px;&.is-collapse{opacity:0;z-index:0;}}"]);var D=e(7198),C=e(82738),K=e(53732),R=e.n(K);class G extends o.PureComponent{render(){const{isCollapse:i,renderReadOnly:g,projectAlike:P,projectMeta:b}=this.props;return(0,I.jsx)("div",{ref:T=>this.$element=T,className:R()("mb-design-page",{"is-collapse":i}),children:g({projectAlike:P,projectMeta:b})})}}class m extends o.PureComponent{constructor(i){super(i),(0,E.A)(this,"setElementRef",g=>this.$element=g),MB.f.inPreview=!i.isCollapse}componentDidMount(){this.$element.addEventListener("wheel",this.handleWheel,{passive:!1})}componentWillUnmount(){MB.f.inPreview=!1,this.$element.removeEventListener("wheel",this.handleWheel)}handleWheel(i){(i.ctrlKey||i.metaKey)&&i.preventDefault()}render(){const{isCollapse:i,renderPreview:g,projectAlike:P,projectMeta:b,projectShare:T}=this.props;return(0,I.jsx)("div",{ref:this.setElementRef,className:R()("mb-preview-page",{"is-collapse":i}),children:g({projectAlike:P,projectMeta:b,projectShare:T})})}}var q=e(55673),ee=e(98267),ne=e(30986),de=e(86769),$=e(3862),J=e(78915),se=e(22835);const fe=(j,i)=>{const{current:{currentProject:g},ui:{toolbar:{isShowSticky:P},leftLayout:{leftPanel:{show:b,width:T},directory:{screen:{currentPage:x},bottom:{height:V},screen:{screenCollapseKeySet:r}}},rightLayout:{rightPanel:{show:u,resizedWidth:U}},fixedLayout:{modals:{previewCanvasModal:A,previewModal:Z}}},editor:{state:{mode:{fullScreenMode:X}}}}=MB.__store__.getState(),te=()=>{MB.__store__.dispatch({type:"entry:handle-tool:preview:view_mode",payload:{previewViewMode:"device"}});const{pageKey:re,canvasKey:pe}=de.A.validateAndTryCorrectPGAndCVKey(x.key,j,null,g.category===$.t_);MB.webpackInterface.store.dispatch({type:"entry:runner:activate:canvas",payload:{pageKey:re,canvasKey:pe,saveHistory:!1,forceInit:!0,keepScale:!1}}),MB.webpackInterface.store.dispatch({type:"preview:set:leftPaneWidth",payload:{leftPaneWidth:T!=null?T:250}}),MB.webpackInterface.store.dispatch({type:"preview:update:state",payload:{hasChangedScaleManually:!1}}),MB.webpackInterface.store.dispatch({type:"preview:panel:set:height",payload:{panelHeight:V}}),MB.webpackInterface.store.dispatch({type:"preview:set:rightPaneWidth",payload:{rightPaneWidth:U,projectCid:g.cid}}),X&&MB.webpackInterface.store.dispatch({type:"reducer:preview-toolbar:fullscreen",payload:{isFullScreenMode:!0}}),MB.webpackInterface.store.dispatch({type:"ST:update",payload:{STMode:P}}),MB.webpackInterface.store.dispatch({type:"entry:preview-setting:toggle:isMinimized",payload:{isMinimized:!b,isMemorize:!X}}),MB.webpackInterface.store.dispatch({type:"entry:preview-setting:toggle:rightPane",payload:{isShowRightPane:u,isMemorize:!X}}),MB.webpackInterface.store.dispatch({type:"preview:set:collapsedRBPageKeySet",payload:{collapsedRBPageKeySet:r}}),MB.webpackInterface.store.dispatch({type:"entry:preview:toggle:isHiddenToolBar",payload:{value:!1}}),MB.action("modal:reset:state"),MB.action("entry:exit:edit:basket"),MB.__store__.dispatch({type:"entry:comment:disabled",payload:{noWigglingCommentCid:!0}}),MB.__store__.dispatch({type:"versions:update",payload:{isVersionManagementPaneShow:!1}}),MB.__store__.dispatch(J.GO.toggleInspectMode(!1)),MB.__store__.dispatch(J.GO.toggleHandMode(!1)),MB.__store__.dispatch(J.GO.select([])),MB.__store__.dispatch({type:"elbow:update",payload:{isInElbowMode:!1}}),MB.__store__.dispatch({type:"entry:ST:STMode:disable"}),MB.__store__.dispatch({type:"ST:clear"})};A!=null&&A.isOpen||Z!=null&&Z.isOpen?(MB.action("modal:reset:preview:modal:state"),setTimeout(()=>{te(),i==null||i()},600)):(te(),i==null||i())},ue=(j,i,g)=>{const{container:{current:{rootProject:P},common:{leftPaneWidth:b,panelHeight:T,rightPaneWidth:x,collapsedRBPageKeySet:V},runner:{activePageKey:r},previewSetting:{isFullScreenMode:u,isMinimized:U,isShowRightPane:A}},ST:{STMode:Z}}=MB.webpackInterface.store.getState(),{ui:{leftLayout:{directory:{screen:{currentPage:X}}}},editor:{state:{mode:{isHtmlZipPreview:te}}}}=MB.__store__.getState();g==="inspect"?(MB.__store__.dispatch({type:"entry:comment:disabled"}),MB.__store__.dispatch(J.GO.toggleInspectMode(!1)),MB.__store__.dispatch(J.GO.toggleHandMode(!1)),MB.__store__.dispatch(J.GO.select([]))):(X.key!==r&&MB.__store__.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:j,projectMeta:i,screenCid:r,isHtmlZip:te}}),MB.__store__.dispatch({type:"screen:add:collapseKeySet",payload:{refs:V,projectCid:P.cid}}),u&&MB.__store__.dispatch(J.GO.toggleFullScreenMode(!0)),MB.webpackInterface.store.dispatch({type:"entry:runner:cleanup:audio"}),MB.webpackInterface.store.dispatch({type:"runner:reset:state:except:history"}),MB.webpackInterface.store.dispatch({type:"container:comment:reset:state"}),MB.webpackInterface.store.dispatch({type:"preview:previewPanel:navindex",payload:{previewPanelNavIndex:0}}),MB.__store__.dispatch({type:"left-panel:set:width",payload:{width:b,projectCid:P.cid}}),MB.__store__.dispatch({type:"directory-panel:bottom:set:height",payload:{height:T}}),MB.__store__.dispatch({type:"right-side-panel:update:resize:width",payload:{width:x,projectCid:P.cid}}),MB.__store__.dispatch({type:"right-side-panel:collapse:panel",payload:{show:A,isMemorize:!u}}),MB.__store__.dispatch({type:"left-panel:collapse:panel:show",payload:{show:!U,isMemorize:!u}}),MB.__store__.dispatch({type:"entry:observe:dom:size:update-viewport-rect"}),MB.__store__.dispatch({type:"entry:isShowSticky:toggle",payload:{isShowSticky:Z}}),requestAnimationFrame(()=>MB.__store__.dispatch({type:"entry:update:viewport:rect"})),MB.webpackInterface.store.dispatch({type:"entry:comment:disabled"}),(0,se.RF)(r))},Q=(j,i,g)=>{if(g!=="read_only"){const{container:{current:{rootProject:P},common:{leftPaneWidth:b,panelHeight:T,rightPaneWidth:x,collapsedRBPageKeySet:V},runner:{activePageKey:r},previewSetting:{isFullScreenMode:u,isMinimized:U,isShowRightPane:A}},ST:{STMode:Z}}=MB.webpackInterface.store.getState(),{ui:{leftLayout:{directory:{screen:{currentPage:X}}}},editor:{state:{mode:{isHtmlZipPreview:te}}}}=MB.__store__.getState();X.key!==r&&MB.__store__.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:j,projectMeta:i,screenCid:r,isHtmlZip:te}}),MB.__store__.dispatch({type:"screen:add:collapseKeySet",payload:{refs:V,projectCid:P.cid}}),u&&MB.__store__.dispatch(J.GO.toggleFullScreenMode(!0)),MB.webpackInterface.store.dispatch({type:"entry:runner:cleanup:audio"}),MB.webpackInterface.store.dispatch({type:"runner:reset:state:except:history"}),MB.webpackInterface.store.dispatch({type:"container:comment:reset:state"}),MB.webpackInterface.store.dispatch({type:"preview:previewPanel:navindex",payload:{previewPanelNavIndex:0}}),MB.__store__.dispatch({type:"left-panel:set:width",payload:{width:b,projectCid:P.cid}}),MB.__store__.dispatch({type:"directory-panel:bottom:set:height",payload:{height:T}}),MB.__store__.dispatch({type:"right-side-panel:update:resize:width",payload:{width:x,projectCid:P.cid}}),MB.__store__.dispatch({type:"right-side-panel:collapse:panel",payload:{show:A,isMemorize:!u}}),MB.__store__.dispatch({type:"left-panel:collapse:panel:show",payload:{show:!U,isMemorize:!u}}),MB.__store__.dispatch({type:"entry:observe:dom:size:update-viewport-rect"}),MB.__store__.dispatch({type:"entry:isShowSticky:toggle",payload:{isShowSticky:Z}}),requestAnimationFrame(()=>{MB.__store__.dispatch({type:"entry:update:viewport:rect"})}),(0,se.RF)(r)}MB.__store__.dispatch({type:"entry:handle-tool:toggle:inspect-mode",payload:{mode:!0}})};class ce extends o.PureComponent{constructor(i){super(i),(0,E.A)(this,"handleWheelChanged",A=>{if(A.deltaX===0)return;const Z=document.getElementById("workspace"),X=Z.scrollLeft+Z.offsetWidth===Z.scrollWidth&&A.deltaX>0,te=Z.scrollLeft===0&&A.deltaX<0;(X||te)&&A.preventDefault()}),(0,E.A)(this,"handleDesignDidMount",()=>{MB.reduxEntry.setEntryMap(q.T)}),(0,E.A)(this,"keyboardManager",new D.Rr);const{viewMode:g,designOptions:P,previewOptions:b,initialData:T,WMListConfig:x,sharing:V}=i;MB.switchToPreview=A=>{this.state.viewMode!=="device"&&((0,ee.N8)("device"),fe(A),this.setState({viewMode:"device"}))},MB.switchToReadOnly=()=>{if(this.state.viewMode==="read_only")return;const{projectAlike:A,projectMeta:Z,viewMode:X}=this.state;(0,ee.N8)("read_only"),ue(A,Z,X),this.setState({viewMode:"read_only"})},MB.switchToInspect=()=>{if(this.state.viewMode==="inspect")return;const{projectAlike:A,projectMeta:Z,viewMode:X}=this.state;(0,ee.N8)("inspect"),Q(A,Z,X),this.setState({viewMode:"inspect"})},this.state={isDataLoaded:!1,viewMode:g,projectAlike:null,projectMeta:null,projectShare:void 0};const{requestData:r,renderDesign:u,renderPreview:U}=Ie({initialData:T,WMListConfig:x,designOptions:P,previewOptions:b,onComponentDidMount:this.handleDesignDidMount,sharing:V});this.requestData=r,this.renderDesign=u,this.renderPreview=U}componentDidMount(){Promise.all([this.requestData(this.state.viewMode)]).then(i=>{let[{projectAlike:g,projectMeta:P,projectShare:b}]=i;this.setState({projectAlike:g,projectMeta:P,projectShare:b},()=>{this.setState({isDataLoaded:!0})});const T=document.getElementById("workspace");T&&T.addEventListener("wheel",this.handleWheelChanged)})}componentWillUnmount(){const i=document.getElementById("workspace");i&&i.removeEventListener("wheel",this.handleWheelChanged,{capture:!0})}render(){const{isDataLoaded:i,viewMode:g,projectAlike:P,projectMeta:b,projectShare:T}=this.state,{renderDesign:x,renderPreview:V}=this;return(0,I.jsx)(ne.G.Provider,{value:g,children:(0,I.jsx)(D.M.Provider,{value:this.keyboardManager,children:(0,I.jsx)(C.$,{children:(0,I.jsxs)(c,{className:"example-app",children:[i&&(0,I.jsx)(G,{isCollapse:!["read_only","inspect"].includes(g),projectAlike:P,projectMeta:b,renderReadOnly:x}),i&&(0,I.jsx)(m,{isCollapse:g!=="device",projectAlike:P,projectMeta:b,projectShare:T,renderPreview:V})]})})})})}}var he=e(16615),Ke=e(78401),xe=e(54844),Ge=e(28894);e.p="./mb-proto2/";const Ue=document.getElementById("workspace"),He=async()=>{var j,i;const g=De({isHTMLZip:!0});(0,le.Fr)()&&((j=document.querySelector("body"))==null||j.classList.add("mobile"));let P=await(0,f.Rz)();const{projectUpper:b,projectMeta:T}=P;P={...P,projectName:b.name,project_basic:b,project_meta:T};const{sharing:x}=await(0,xe.J_)({project:b}),V=await(0,f.CS)(),{generateLang:r}=await Ge.qu.loadLLG();await r(),document.title=""+(0,Ke.qk)(b.name||b.title),!ENV.IS_ON_PREMISES&&(0,he.I2)();const u=(i=new URLSearchParams(location.search))==null?void 0:i.get("view_mode"),U=window.HZv5_PREVIEW_MODE||"",A=u||U,Z=["device","read_only","inspect"].includes(A)?A:"read_only",X={isDesign:!0,isExperience:!1,isLoggedExperience:!1};(0,p.createRoot)(Ue).render((0,I.jsx)(ce,{initialData:P,WMListConfig:V,viewMode:Z,designOptions:X,previewOptions:g,sharing:x}))};document.addEventListener("DOMContentLoaded",async()=>{await He()})},42459:(n,w,e)=>{e.d(w,{$G:()=>L,Op:()=>y,Uj:()=>h,XB:()=>f,be:()=>l,fQ:()=>S,nK:()=>_,u5:()=>O});const p=(t,a,M)=>{if(t[a]===M)return t;const W=[...t];return W[a]=M,W},f=(t,a)=>a>=0&&a<=t.length-1?[...t.slice(0,a),...t.slice(a+1)]:t,_=(t,a,M)=>[...t.slice(0,a),M,...t.slice(a)],l=(t,a,M)=>M===a?t:M<a?[...t.slice(0,M),...t.slice(M+1,a+1),t[M],...t.slice(a+1)]:[...t.slice(0,a),t[M],...t.slice(a,M),...t.slice(M+1)],O=(t,a)=>[...t,a],k=(t,a)=>[a,...t],F=t=>{if(t.length===0)return t;const a=[...t];return a.pop(),a},E=t=>{if(t.length===0)return t;const a=[...t];return a.shift(),a},o=(t,a)=>a&&a.length?[...t,...a]:t,S=(t,a)=>t.includes(a)?t:[...t,a],h=(t,a)=>{const M=t.indexOf(a);return~M?[...t.slice(0,M),...t.slice(M+1)]:t},s=(t,a,M)=>{const W=t.indexOf(M);return~W?l(t,a,W):t},y=(t,a)=>{const M=t.findIndex(a);return~M?[...t.slice(0,M),...t.slice(M+1)]:t},d=(t,a,M)=>{const W=t.findIndex(a);return~W?l(t,M,W):t},L=(t,a,M)=>{const W=t.findIndex(a);if(!~W||t[W]===M)return t;const ie=[...t];return ie[W]=M,ie},N=(t,a,M)=>{const W=t.findIndex(a);if(!~W)return[...t,M];if(t[W]===M)return t;const ie=[...t];return ie[W]=M,ie},I=(t,a,M)=>t.find(a)===void 0?[...t,M]:t,Y=(t,a)=>{const M=[];for(let W=0,ie=t.length;W<ie;W+=a)M.push(t.slice(W,W+a));return M}},52563:(n,w,e)=>{e.d(w,{FE:()=>k,Pj:()=>l,Vo:()=>F});var p=e(79371),f=e.n(p);const _=function(E,o,S){S===void 0&&(S=1e3);const h=(s,y)=>{(s==null?void 0:s.size)>o[0]&&console.error("[Oversize "+E+"]",s.size),(y==null?void 0:y.size)>o[1]&&console.error("[Oversize "+E+" effecSet]",y.size)};return f()(h,S)},l=E=>{const o=new Map;return{_map:o,addRef:(d,L)=>{o.has(d)?o.get(d).add(L):o.set(d,new Set([L])),E==null||E(o,o.get(d))},delRef:(d,L)=>{const N=o.get(d);N&&(N.delete(L),N.size||o.delete(d))},getRef:d=>o.get(d),hasRef:(d,L)=>{var N;return(N=o.get(d))==null?void 0:N.has(L)}}},O=E=>{const o=E.hotAttr.interactions;if(!(o!=null&&o.length))return null;const S=new Set;return o.forEach(h=>{const s=h.targetResCanvasKey||h.targetBasketKey||h.targetWidgetKey||h.targetOverlayKey;s&&S.add(s)}),S},k=()=>{const E=_("ItaRefMap",[2e3,200]),{_map:o,addRef:S,delRef:h}=l(E);return{update:(s,y)=>{const{key:d}=s,L=y?O(y):null,N=O(s);N&&[...N].forEach(I=>{S(I,d),L==null||L.delete(I)}),L!=null&&L.size&&[...L].forEach(I=>h(I,d))},delete:s=>{const y=s?O(s):null;y!=null&&y.size&&[...y].forEach(d=>h(d,s.key))},getEffectKeys:s=>o.has(s)?Array.from(o.get(s)):[],clear:()=>{E.flush(),o.clear()},_getMap:()=>o}},F=()=>{const E=_("MktCidRefMap",[2e3,2e3]),{_map:o,addRef:S,delRef:h,hasRef:s}=l(E),y=d=>{if(!d)return;const{mktCid:L,mktUnlock:N}=d.hotAttr;return L&&!N?L:void 0};return{update:(d,L)=>{const{key:N}=d,I=y(L),Y=y(d);Y&&Y!==I&&(Y&&!sdkStore.findUpHotItemList(N).some(t=>s(Y,t.key))&&S(Y,N),I&&h(Y,N))},delete:d=>{if(d){const L=y(d);L&&h(L,d.key)}},getEffectKeys:d=>o.has(d)?Array.from(o.get(d)):[],clear:()=>{E.flush(),o.clear()},isEmpty:()=>!o.size,_getMap:()=>o}}},56202:(n,w,e)=>{e.d(w,{Bd:()=>a,Fl:()=>k,Fr:()=>h,Gd:()=>N,H8:()=>E,Hv:()=>L,II:()=>I,Md:()=>t,VK:()=>Me,b8:()=>_,cX:()=>l,gm:()=>o,lg:()=>M,m0:()=>s,nr:()=>S,uF:()=>O,uf:()=>Y,un:()=>d,vq:()=>F});var p,f;const _=()=>window.MB_DESKTOP_VERSION||window.isElectron||/Electron/i.test(navigator.userAgent),l=()=>/(Macintosh)/i.test(navigator.userAgent),O=()=>/(Windows)/i.test(navigator.userAgent),k=()=>/(Lark)/i.test(navigator.userAgent),F=()=>/MicroMessenger/i.test(navigator.userAgent),E=()=>/Chrome/i.test(navigator.userAgent),o=()=>/Firefox/i.test(navigator.userAgent),S=()=>/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),h=()=>{const H=new URLSearchParams(location.search);return H&&H.get("inapp")==="1"&&(e.g.isInAPP=!0),/(iPod|iPhone|iPad|Android|MobileClient)/.test(navigator.userAgent)||window.isInAPP},s=()=>/Android/i.test(navigator.userAgent),y=()=>/(iPad)/.test(navigator.userAgent),d=()=>/(iPod|iPhone|iPad)/.test(navigator.userAgent),L=()=>!!(window.webkit&&window.webkit.messageHandlers),N=()=>navigator.standalone,I=()=>/\/uichina$/.test(location.pathname),Y=()=>/\/forum$/.test(location.pathname),t=()=>/(MobileClient)/.test(navigator.userAgent),a=!!(typeof window<"u"&&window.document&&window.document.createElement),M=/(mac|iphone|ipod|ipad)/i.test(typeof navigator<"u"?((p=navigator)==null?void 0:p.platform)||((f=navigator)==null||(f=f.userAgentData)==null?void 0:f.platform):""),W=()=>{var H;if(!((H=navigator)!=null&&H.plugins))return!1;for(const z in navigator.plugins)if(navigator.plugins[z]&&navigator.plugins[z].filename==="np-mswmp.dll")return!0;return!1},ie=H=>{H=H.toLowerCase();const z=H.includes("qihu"),oe=H.includes("360se"),ve=H.includes("360ee");return z&&(oe||ve)},Me=()=>{let H,z;const oe=navigator.userAgent;if(z=void 0,H=oe.match(/(opera|chrome|qq|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(H[1]))return z=/\brv[ :]+(\d+)/g.exec(oe)||[],{name:"IE",version:parseFloat(z[1]||"")};if(H[1]==="Chrome"){if(ie(oe)||W())return{name:"360Browser",version:"unknown"};if(/Edg/i.test(oe))return z=oe.match(/Edg\/(\d+)/i),{name:"Edge",version:z?parseFloat(z[1]):"unknown"};if(z=oe.match(/\b(OPR|Edge)\/(\d+)/),z!==null)return{name:z[1].replace("OPR","Opera"),version:parseFloat(z[2])}}return/QQBrowser/i.test(oe)?(z=oe.match(/QQBrowser\/(\d+)/i),{name:"QQBrowser",version:z?parseFloat(z[1]):"unknown"}):(H=H[2]?[H[1],H[2]]:[navigator.appName,navigator.appVersion,"-?"],(z=oe.match(/version\/(\d+)/i))!==null&&H.splice(1,1,z[1]),{name:H[0],version:parseFloat(H[1])})}},58156:(n,w,e)=>{e.d(w,{Z:()=>_,j:()=>l});const p=new Map;let f;const _=O=>{const{key:k,hotAttr:F,sub:E}=O;F.type==="rResBunch"&&F.bunch==="rbPage"&&(f=k),f&&p.set(f,l(f)+1)},l=O=>p.get(O)||0},59128:(n,w,e)=>{e.d(w,{sI:()=>f});const p="_cmt",f=o=>o.endsWith(p),_=o=>{if(f(o))throw new Error("bad datKey: "+o);return""+o+p},l=o=>{if(!f(o))throw new Error("bad cmtKey: "+o);return o.slice(0,-p.length)},O="_cur",k=o=>o.endsWith(O),F=o=>{if(k(o))throw new Error("bad datKey: "+o);return""+o+O},E=o=>{if(!k(o))throw new Error("bad curKey: "+o);return o.slice(0,-O.length)}},79388:(n,w,e)=>{e.d(w,{F2:()=>Ae,LK:()=>Pe,sH:()=>Se,z0:()=>Ee});var p=e(93093),f=e(37304),_=e(63986),l=e.n(_),O=e(70093),k=e.n(O),F=e(76967),E=e.n(F),o=e(76805),S=e(18833),h=e(47946),s=e(31561),y=e(87612),d=e(83557),L=e(89989),N=e(34860),I=e(85449),Y=e(55244),t=e(49425),a=e(71577),M=e(50060),W=e(74222),ie=e(58156),Me=e(53940),H=e(15515),z=e(52563),oe=e(9446),ve=e(68587),Te=e(20089),ye=e(18816);ENV.IS_SKT_HTTP&&(0,h.pX)(!0),(0,y.Z)(p.wd,f.Z);const Ee=async(B,c)=>{if(console.warn("[onTransferError]",B,c),B==="Tot"||B==="5XX")MB.notice&&MB.notice({text:I18N.Common.offline_alert,duration:32*1e3,showClose:!0,priority:1,type:"super"});else if(B==="4XX"&&c&&/403/.test(c.message)){if(MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.cant_edit,confirmText:I18N.dModule.exit_editing,desc:I18N.dModule.cant_edit_desc}).then(()=>MB.global.onBackButtonClick()),/Error: bad flpak-save/.test(c.message)){var D,C,K;(0,y.p)("saveFlpakError",c,{uId:(D=MB)==null||(D=D.user)==null?void 0:D.id,orgCid:(C=MB)==null||(C=C.currentOrg)==null?void 0:C.cid,projectCid:(K=MB)==null||(K=K.getRootProject())==null?void 0:K.cid})}}else B==="4XX"&&c&&/401/.test(c.message)?(window.onbeforeunload=void 0,MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.err_info_modal.INVALID_COOKIE.title,desc:I18N.dModule.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dModule.confirm}).then(()=>(0,S.AG)())):B==="4XX"?(window.onbeforeunload=void 0,MB.global.popupHelper.alertAsyncBlocked({title:I18N.dModule.err_info_modal.INVALID_COOKIE.title,desc:I18N.dModule.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dModule.confirm}).then(()=>(0,S.AG)())):await MB.global.popupHelper.alertAsyncBlocked({desc:window.I18N.dModule.unknown_error.replace(/%s/i,status),isHTML:!0})},Se=async(B,c)=>{console.warn("[onReadOnlyError]",B,c),B!=="Cur"&&MB.notice&&MB.notice({text:I18N.Common.offline_alert,duration:5*1e3,showClose:!0,priority:1})},We=B=>{let{sendCur:c,cssCur:D}=B;const C=()=>{try{if((0,N.oK)()){const R=(0,I.ll)();if(!R)return;const{container:{runner:{activePageKey:G}}}=R;if(!G)return;c(G,void 0,void 0)}else{const R=(0,I.dP)();if(!R)return;const{current:{currentScreen:G},screencontainer:{cursorPos:m}}=R,q=G&&(G.cid||G.key);if(!q)return;const{x:ee,y:ne}=m||{};c(q,ee,ne)}}catch(K){console.error("cssCur push error",K)}};setInterval(()=>{D.pollRoomChg()&&C()},3*1e3),document.addEventListener("pointermove",C,{passive:!0})},Pe=function(B,c){var D;c===void 0&&(c=rootSdk);const C=(0,I.dP)();if(!C||!MB.action)return;try{(0,a.G_)()}catch(Q){console.error(Q)}if(((D=rootSdk)==null||(D=D.cssCur)==null?void 0:D.getRoomStat().length)<=1)return;const K=C.ui.leftLayout.directory.screen.contextMenuState;if(K!=null&&K.show&&k()(K.contextScreenSelection,B).length>0){const Q=E()(K.contextScreenSelection,B);Q.length===0&&MB.action("screen:close:contextmenu"),MB.action("screen:update:contextmenu:contextScreenSelection",Q)}const R=C.ui.leftLayout.directory.screen.currentPage,G=C.ui.leftLayout.directory.screen.screenDataMap;R&&B.includes(R.key)&&c.sdkStore.isTrashed(R.key)&&(C.editor.state.mode.basketEditor.refPage?MB.action("entry:update:screen:list"):MB.action("entry:activate:root-project:home-screen"),MB.notice({text:"\u5F53\u524D\u9009\u4E2D\u753B\u5E03\u5DF2\u88AB\u6B63\u5728\u534F\u540C\u7684\u6210\u5458\u5220\u9664",type:"warning"}));const m=c.sdkStore.getHotItem(B[0]);if((m==null?void 0:m.hotAttr.type)==="rResBunch"&&(m==null?void 0:m.hotAttr.bunch)==="rbPage")if(!G[B[0]]||c.sdkStore.isTrashed(B[0]))MB.action("entry:update:screen:list");else{const Q=G[B[0]];if(!l()(m==null?void 0:m.hotAttr,Q==null?void 0:Q.hotAttr)){var q,ee,ne,de,$,J;((Q==null||(q=Q.hotAttr)==null?void 0:q.name)!==(m==null||(ee=m.hotAttr)==null?void 0:ee.name)||(Q==null||(ne=Q.hotAttr)==null?void 0:ne.icon)!==(m==null||(de=m.hotAttr)==null?void 0:de.icon)||(Q==null||($=Q.hotAttr)==null?void 0:$.zIndex)!==(m==null||(J=m.hotAttr)==null?void 0:J.zIndex))&&MB.action("entry:update:screen:list"),(R==null?void 0:R.key)===(m==null?void 0:m.key)&&MB.action("entry:update:current:screen-mata",{screenMeta:{cid:m==null?void 0:m.key,sup:m==null?void 0:m.sup,sub:m==null?void 0:m.sub,...m==null?void 0:m.hotAttr},updateWidgetTreeData:!1})}}const se=C.editor.state.mode.selections,fe=se.filter(Q=>!c.sdkStore.isTrashed(Q));fe.length!==se.length&&MB.action("entry:update:selection:select:items",{cids:fe});const ue=C.editor.state.mode.hover.item;ue&&c.sdkStore.isTrashed(ue)&&MB.action("mode:update:hover:item","")},Be=B=>{Pe(B),_e(B.map(c=>sdkStore.getHotItem(c)).filter(c=>{var D;return(c==null||(D=c.hotAttr)==null?void 0:D.type)==="wChart"}))},be={repaint:B=>{let{type:c,payload:D}=B;c===s.a&&Be(D.changedKeyList)}},Ce=(0,o.nF)(()=>{!(0,I.dP)()||!MB.action||MB.action("entry:comment:rebuild:commentList")},.5*1e3),Oe={repaint:B=>{let{type:c,payload:D}=B;c===L.a&&Ce()}},le=async B=>{let{projectBasicCid:c}=B;try{const{userId:D,flatKey:C,sclibKey:K}=await fetchGetJSON("/api/flat/web_v1/proj2-edit-info?prj2Cid="+c);return{userId:D,flatKey:C,sclibKey:K}}catch(D){await apiErrorModals(D)}},De=B=>{let{sdk:c=sdkStore,rootKey:D=W.$k,initWM:C}=B;const K=[],R=Date.now();return new Promise(G=>{const m=new Set,q=[],ee=(0,z.Pj)(),ne=$=>{_e(K),C==null||C(Array.from(ee._map.keys()),ee._map),m.clear(),G($)},de=$=>{if(m.has($))return;m.add($);const J=c.getHotItem($);if(!J)return;(0,M.pE)(J.key,void 0,!0);const{hotAttr:se,sub:fe}=J;se.type===Te.x.WChart&&K.push(J),(0,ie.Z)(J);let ue=fe;if(se.type==="rResBunch"&&se.bunch==="rbPage"&&(ue=[],fe.forEach(ce=>{var he;((he=c.getHotItem(ce))==null?void 0:he.hotAttr.bunch)==="rbPage"?q.push(ce):ue.push(ce)})),se.type==="wBasket"&&["bDanli","bMuban"].includes(se.basket)){var Q;ue=((Q=sdkStore.getHotItem(se.refRBPageKey))==null?void 0:Q.sub)||[]}if(C){const{mktCid:ce,mktUnlock:he}=se;ce&&!he&&ee.addRef(ce,$)}for(const ce of ue)de(ce)};for(D!==W.$k&&q.push(D),q.push(...c.getHotItem(W.$k).sub);q.length;){const $=q.shift();if(!(!$||m.has($))){if(Date.now()-R>3e3){ne(!1);return}de($)}}ne(!0)})},Ae=async(B,c,D)=>{try{var C,K;const G=Date.now();performance.mark("setupSDK:start");const m=await(0,h.ur)(B),q=m.sdkStore.createRoSdkStore();Object.assign(globalThis,{...m,rootSdk:m,roSdkStore:q}),We(m),m.sdkStore.subscribe(be.repaint),m.cmtStore.subscribe(Oe.repaint);const ee=c&&(0,N.OB)();ee&&((0,t.nU)(m.flatStore,c),(0,t.lb)(m.flatStore),(0,t.th)(m.flatStore),(0,t.Uh)(m.flatStore),(0,t.TK)(m.flatStore),(0,t.a3)(m.flatStore,c)),performance.measure("setupSDK","setupSDK:start");let ne=(C=(0,H.Yt)(Me.NF+"-"+(c==null?void 0:c.cid),"",H.qW.String).split(","))==null?void 0:C[0];const de=((K=m.sdkStore.getHotItem(W.$k))==null?void 0:K.sub)||[];(!ne||!de.includes(ne))&&(ne=de[0]||W.$k),performance.mark("walkInitTree:start");const $=await De({sdk:m.sdkStore,rootKey:ne,initWM:D});(0,M.sk)(),ee&&$&&Date.now()-G<1e4&&(0,M.Uk)(),performance.measure("walkInitTree","walkInitTree:start")}catch(G){var R;const m=G?Number(G.status)||Number((R=G.toString().split("status")[1])==null||(R=R.split(":")[1])==null?void 0:R.split(",")[0]):void 0;console.warn("[initRootSdk]",G,m),(0,y.p)("initRootSdk",G,{status:m,sdkOption:B,projectBasic:c}),await(0,S.FY)({status:m}),await new Promise(()=>{})}},_e=B=>{const c=[ye.h.Map100000.loadMLG()];for(const D of B){const{chartType:C,mapAdCode:K}=D.hotAttr.chartConfig;if(C==="map_chart"){const R=ye.h["Map"+K];R.hasMLG()||c.push(R.loadMLG())}}return Promise.all(c)},ke=B=>async c=>{let{fssDat:D}=c;try{const C=await D.loadSOS();if(!C)return;if(console.warn("[afterStoreCreate] found unsaved proj tree",C),await MB.global.popupHelper.confirmAsync({isClose:!0,isHTML:!0,title:"\u6062\u590D\u6570\u636E",desc:["<p>\u68C0\u6D4B\u5230\u672A\u6210\u529F\u4FDD\u5B58\u5230\u4E91\u7AEF\u7684\u6587\u4EF6\u6570\u636E\uFF0C\u6700\u540E\u8BB0\u5F55\u65F6\u95F4\u4E3A\uFF1A"+getFormatDateString(new Date(C.time).getTime(),"","-")+"\u3002</p>","<p>\u662F\u5426\u6062\u590D\u6570\u636E\u5230\u65B0\u6587\u4EF6\uFF1F</p>"].join(""),confirmText:"\u6062\u590D"})){const{clientData:{upperCid:R}}=await newFlpakFromTree(C.tree,B.team_cid,{...B,name:B.name+"-\u6062\u590D\u6570\u636E"}).catch(async G=>{await MB.global.popupHelper.alertAsync({title:"\u6062\u590D\u5931\u8D25",desc:"\u672A\u6210\u529F\u6062\u590D\u6570\u636E\u5230\u65B0\u6587\u4EF6\uFF0C\u8BF7\u91CD\u65B0\u52A0\u8F7D\u9875\u9762\u5E76\u91CD\u8BD5\u3002\u62A5\u9519\u4FE1\u606F\uFF1A"+(G.message||String(G))}),location.reload(),await setTimeoutAsync(1e9)});await D.freeSOS(),location.href="/proto/design/"+R}else await D.freeSOS()}catch(C){toSentry("loadSOS err",C)}},Ie=typeof window.Worker<"u"&&typeof window.DecompressionStream<"u"&&typeof window.ReadableStream<"u"&&window.location.protocol.startsWith("http"),Le=B=>{if(!Ie)return;let c,D;return{onStatFlpak:(C,K)=>{if(C!==B)return;globalStore.init(K);const{currentSize:R,isFlpakSizeWarn:G}=globalStore.getFlpakSizeInfo();D=G,G&&(c="\u9879\u76EE\u4F53\u79EF\u8F83\u5927(\u7EA6"+R+"M)\uFF0C\u8BF7\u7A0D\u7B49..."),updateLoadingProgress({value:10,nextVlue:20,text:c,message:"fetched"})},onParseFlpak:C=>{let{part:K,rate:R}=C;const G=D?50:70;updateLoadingProgress({value:10+Math.floor(R*G/100),nextVlue:G+10,text:c,message:"parse-"+K})},onTransferItems:(C,K)=>{const R=D?30:10;updateLoadingProgress({value:90-R+Math.floor(C/K*R),nextVlue:95,text:c,message:"transfer"})}}}},88334:(n,w,e)=>{e.d(w,{LN:()=>S,uT:()=>F});var p=e(85449),f=e(67771),_=e(79371),l=e.n(_);const O=h=>{var s,y;const d={type:"reducer:watermark:update-state",payload:h};(s=MB.__store__)==null||s.dispatch(d),(y=MB.webpackInterface)==null||(y=y.store)==null||y.dispatch(d)},k=function(h,s){s===void 0&&(s=sdkStore);const y=new Set;return s.walkHotItemSubtree2(h,d=>{d.hotAttr.mktCid&&y.add(d.hotAttr.mktCid)}),[...y]},F=l()(async h=>{let s=(0,p.fV)();if(!s)return{mdWMMktList:new Set,mtWMMktList:new Set,noWMMktList:new Set};const{mdWMMktList:y,mtWMMktList:d,noWMMktList:L}=s,N=h.filter(M=>!y.has(M)&&!d.has(M)&&!L.has(M)),I=await(0,f.E5)(N);s=(0,p.fV)();const Y=new Set([...s.mdWMMktList].concat(I.mdWMMktList)),t=new Set([...s.mtWMMktList].concat(I.mtWMMktList)),a=new Set([...s.noWMMktList].concat(I.noWMMktList));return O({mdWMMktList:Y,mtWMMktList:t,noWMMktList:a}),{mdWMMktList:Y,mtWMMktList:t,noWMMktList:a}},1e3),E=async h=>{const s=await splitMktListByCid(h),y=new Set(s.mdWMMktList),d=new Set(s.mtWMMktList),L=new Set(s.noWMMktList);return O({mdWMMktList:y,mtWMMktList:d,noWMMktList:L}),{mdWMMktList:y,mtWMMktList:d,noWMMktList:L}},o=h=>{const s=new Set,y=new Set,d=new Set(h);O({mdWMMktList:s,mtWMMktList:y,noWMMktList:d})},S=h=>{const s=new Set((h==null?void 0:h.md_vip_mkt_list)||[]),y=new Set((h==null?void 0:h.mt_vip_mkt_list)||[]),d=new Set((h==null?void 0:h.no_wm_mkt_list)||[]);O({mdWMMktList:s,mtWMMktList:y,noWMMktList:d})}},94994:n=>{n.exports=dompurify}},me={};function v(n){var w=me[n];if(w!==void 0)return w.exports;var e=me[n]={id:n,loaded:!1,exports:{}};return ae[n].call(e.exports,e,e.exports,v),e.loaded=!0,e.exports}v.m=ae,v.amdO={},(()=>{var n=[];v.O=(w,e,p,f)=>{if(e){f=f||0;for(var _=n.length;_>0&&n[_-1][2]>f;_--)n[_]=n[_-1];n[_]=[e,p,f];return}for(var l=1/0,_=0;_<n.length;_++){for(var[e,p,f]=n[_],O=!0,k=0;k<e.length;k++)(f&!1||l>=f)&&Object.keys(v.O).every(s=>v.O[s](e[k]))?e.splice(k--,1):(O=!1,f<l&&(l=f));if(O){n.splice(_--,1);var F=p();F!==void 0&&(w=F)}}return w}})(),v.n=n=>{var w=n&&n.__esModule?()=>n.default:()=>n;return v.d(w,{a:w}),w},(()=>{var n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,w;v.t=function(e,p){if(p&1&&(e=this(e)),p&8||typeof e=="object"&&e&&(p&4&&e.__esModule||p&16&&typeof e.then=="function"))return e;var f=Object.create(null);v.r(f);var _={};w=w||[null,n({}),n([]),n(n)];for(var l=p&2&&e;(typeof l=="object"||typeof l=="function")&&!~w.indexOf(l);l=n(l))Object.getOwnPropertyNames(l).forEach(O=>_[O]=()=>e[O]);return _.default=()=>e,v.d(f,_),f}})(),v.d=(n,w)=>{for(var e in w)v.o(w,e)&&!v.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:w[e]})},v.f={},v.e=n=>Promise.all(Object.keys(v.f).reduce((w,e)=>(v.f[e](n,w),w),[])),v.u=n=>""+({214:"lazy-lib-paper",437:"lazy-lib-fontkit",703:"lazy-lib-rehype",956:"lazy-lib-i18n",976:"lazy-lib-dl"}[n]||n)+"-"+{70:"aaa6a4bc54179f4418d1",214:"5a9908939d850d4cae67",437:"94d1920236ee8aff3185",703:"013772de7c49f3c667fa",956:"8151f94a02ccf557ab15",976:"ef4a8eb58075f96842b2"}[n]+".js",v.miniCssF=n=>{},v.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(n){if(typeof window=="object")return window}}(),v.o=(n,w)=>Object.prototype.hasOwnProperty.call(n,w),(()=>{var n={},w="@mb2024/mb-proto:";v.l=(e,p,f,_)=>{if(n[e]){n[e].push(p);return}var l,O;if(f!==void 0)for(var k=document.getElementsByTagName("script"),F=0;F<k.length;F++){var E=k[F];if(E.getAttribute("src")==e||E.getAttribute("data-webpack")==w+f){l=E;break}}l||(O=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,v.nc&&l.setAttribute("nonce",v.nc),l.setAttribute("data-webpack",w+f),l.src=e),n[e]=[p];var o=(h,s)=>{l.onerror=l.onload=null,clearTimeout(S);var y=n[e];if(delete n[e],l.parentNode&&l.parentNode.removeChild(l),y&&y.forEach(d=>d(s)),h)return h(s)},S=setTimeout(o.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=o.bind(null,l.onerror),l.onload=o.bind(null,l.onload),O&&document.head.appendChild(l)}})(),v.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},v.nmd=n=>(n.paths=[],n.children||(n.children=[]),n),v.j=699,v.p="/mb-proto2/",(()=>{v.b=document.baseURI||self.location.href;var n={699:0};v.f.j=(p,f)=>{var _=v.o(n,p)?n[p]:void 0;if(_!==0)if(_)f.push(_[2]);else{var l=new Promise((E,o)=>_=n[p]=[E,o]);f.push(_[2]=l);var O=v.p+v.u(p),k=new Error,F=E=>{if(v.o(n,p)&&(_=n[p],_!==0&&(n[p]=void 0),_)){var o=E&&(E.type==="load"?"missing":E.type),S=E&&E.target&&E.target.src;k.message="Loading chunk "+p+" failed.\n("+o+": "+S+")",k.name="ChunkLoadError",k.type=o,k.request=S,_[1](k)}};v.l(O,F,"chunk-"+p,p)}},v.O.j=p=>n[p]===0;var w=(p,f)=>{var[_,l,O]=f,k,F,E=0;if(_.some(S=>n[S]!==0)){for(k in l)v.o(l,k)&&(v.m[k]=l[k]);if(O)var o=O(v)}for(p&&p(f);E<_.length;E++)F=_[E],v.o(n,F)&&n[F]&&n[F][0](),n[F]=0;return v.O(o)},e=self.webpackChunk_mb2024_mb_proto=self.webpackChunk_mb2024_mb_proto||[];e.forEach(w.bind(null,0)),e.push=w.bind(null,e.push.bind(e))})(),v.nc=void 0,v.O(void 0,[31,788,908,347],()=>v(97935));var je=v.O(void 0,[31,788,908,347],()=>v(28501));je=v.O(je)})();

//# sourceMappingURL=preview-html-zip-43b70647a9df331a8fc0.js.map